<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Aviator Demo</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div class="app">
  <header>
    <h1>✈ AVIATOR</h1>
    <div class="balance">Баланс: <span id="balance">1000</span></div>
  </header>

  <div class="game">
    <div class="screen">
      <div id="multiplier">x1.00</div>
      <div id="plane">✈</div>
    </div>

    <div class="controls">
      <input type="number" id="bet" value="10" min="1">
      <button id="start">СТАРТ</button>
      <button id="cash" disabled>ЗАБРАТИ</button>
    </div>

    <div class="history" id="history"></div>
  </div>

  <footer>Демо-гра. Без реальних ставок.</footer>
</div>

<script src="game.js"></script>
</body>
</html>

* {
  box-sizing: border-box;
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
}

body {
  margin: 0;
  background: radial-gradient(circle at top, #1b3b8a, #050b25);
  color: white;
}

.app {
  max-width: 420px;
  margin: auto;
  padding: 14px;
}

header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

h1 {
  margin: 0;
  font-size: 22px;
}

.balance {
  font-weight: bold;
}

.screen {
  height: 240px;
  margin-top: 12px;
  background: linear-gradient(#0a1f55, #133d9a);
  border-radius: 18px;
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
}

#multiplier {
  font-size: 52px;
  font-weight: 900;
}

#plane {
  position: absolute;
  bottom: 30px;
  font-size: 48px;
  transition: transform 0.05s linear;
}

.controls {
  display: flex;
  gap: 10px;
  margin-top: 14px;
}

input, button {
  flex: 1;
  padding: 14px;
  border-radius: 14px;
  border: none;
  font-size: 16px;
}

button {
  font-weight: 800;
}

#start {
  background: #2d7dff;
  color: white;
}

#cash {
  background: #2ecc71;
  color: #043d1c;
}

.history {
  margin-top: 14px;
  background: rgba(255,255,255,0.08);
  border-radius: 14px;
  padding: 10px;
  max-height: 120px;
  overflow-y: auto;
  font-size: 14px;
}

footer {
  text-align: center;
  font-size: 12px;
  opacity: 0.7;
  margin-top: 12px;
}

let balance = 1000;
let running = false;
let multiplier = 1;
let crashPoint = 0;
let startTime = 0;

const balEl = document.getElementById("balance");
const multEl = document.getElementById("multiplier");
const plane = document.getElementById("plane");
const startBtn = document.getElementById("start");
const cashBtn = document.getElementById("cash");
const betInput = document.getElementById("bet");
const history = document.getElementById("history");

function newRound() {
  crashPoint = Math.max(1.1, -Math.log(Math.random()) * 2);
  multiplier = 1;
}

function animate(time) {
  if (!running) return;

  let elapsed = time - startTime;
  multiplier = Math.exp(elapsed / 4000);

  multEl.innerText = "x" + multiplier.toFixed(2);
  plane.style.transform = `translateY(${-Math.log(multiplier) * 45}px)`;

  if (multiplier >= crashPoint) {
    running = false;
    multEl.innerText = "CRASH x" + crashPoint.toFixed(2);
    history.innerHTML = `<div style="color:#ff6b6b">✕ ${crashPoint.toFixed(2)}</div>` + history.innerHTML;
    startBtn.disabled = false;
    cashBtn.disabled = true;
    return;
  }

  requestAnimationFrame(animate);
}

startBtn.onclick = () => {
  let bet = Number(betInput.value);
  if (bet <= 0 || bet > balance) return;

  balance -= bet;
  balEl.innerText = balance;

  newRound();
  running = true;
  startTime = performance.now();

  startBtn.disabled = true;
  cashBtn.disabled = false;

  requestAnimationFrame(animate);
};

cashBtn.onclick = () => {
  if (!running) return;

  running = false;
  let bet = Number(betInput.value);
  let win = Math.floor(bet * multiplier);

  balance += win;
  balEl.innerText = balance;

  multEl.innerText = "WIN x" + multiplier.toFixed(2);
  history.innerHTML = `<div style="color:#2ecc71">✓ ${multiplier.toFixed(2)}</div>` + history.innerHTML;

  startBtn.disabled = false;
  cashBtn.disabled = true;
};

